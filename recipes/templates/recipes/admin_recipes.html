{% extends 'recipes/base.html' %}
{% block content %}

<!-- BACK BUTTON -->
<a href="{% url 'admin_dashboard' %}"
   class="btn btn-outline-success btn-sm mb-3">
    â† Back to Dashboard
</a>

<h4 class="fw-bold text-success mb-4">ğŸ“‹ Manage Recipes</h4>

<div class="table-responsive">
    <table class="table table-hover align-middle">

        <thead class="table-light">
            <tr>
                <th>#</th>
                <th>Recipe</th>
                <th>Author</th>
                <th>Date</th>
                <th class="text-center">Actions</th>
            </tr>
        </thead>

        <tbody>
        {% for recipe in recipes %}
            <tr>
                <td>{{ forloop.counter }}</td>

                <td>
                    <strong>{{ recipe.title }}</strong><br>
                    <small class="text-muted">
                        {{ recipe.ingredients|truncatechars:40 }}
                    </small>
                </td>

                <td>{{ recipe.user.username }}</td>

                <td>{{ recipe.created_at|date:"M d, Y" }}</td>

                <td class="text-center">

    <a href="{% url 'recipe_detail' recipe.id %}"
       class="btn btn-sm btn-outline-success">
        View
    </a>

    <a href="{% url 'edit_recipe' recipe.id %}"
       class="btn btn-sm btn-outline-primary">
        Edit
    </a>

    <!-- â­ FEATURE BUTTON -->
    <a href="{% url 'toggle_featured_recipe' recipe.id %}"
       class="btn btn-sm {% if recipe.is_featured %}btn-warning{% else %}btn-outline-warning{% endif %}">
        {% if recipe.is_featured %}
            â­ Featured
        {% else %}
            â˜† Add to Featured
        {% endif %}
    </a>

    <a href="{% url 'delete_recipe' recipe.id %}"
       class="btn btn-sm btn-outline-danger"
       onclick="return confirm('Delete this recipe?')">
        Delete
    </a>

</td>

            </tr>
        {% empty %}
            <tr>
                <td colspan="5" class="text-center text-muted py-4">
                    No recipes found.
                </td>
            </tr>
        {% endfor %}
        </tbody>

    </table>
</div>

{% endblock %}
