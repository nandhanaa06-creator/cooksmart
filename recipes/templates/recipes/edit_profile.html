{% extends 'recipes/base.html' %}
{% block content %}

<div class="row justify-content-center">
    <div class="col-md-6">

        <div class="card shadow-sm p-4 rounded-4">

            <h4 class="text-center text-success fw-bold mb-4">
                ✏️ Edit Profile
            </h4>

            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- PROFILE IMAGE PREVIEW -->
                <div class="text-center mb-3">

                    {% if profile.profile_image %}
                        <img src="{{ profile.profile_image.url }}"
                             class="rounded-circle mb-2"
                             width="100"
                             height="100"
                             style="object-fit:cover;">
                    {% else %}
                        <div class="rounded-circle bg-success text-white
                                    d-inline-flex align-items-center justify-content-center mb-2"
                             style="width:100px;height:100px;font-size:36px;">
                            {{ user.username|slice:":1"|upper }}
                        </div>
                    {% endif %}

                </div>

                <!-- IMAGE INPUT -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">
                        Profile Picture
                    </label>
                    <input type="file"
                           name="profile_image"
                           class="form-control"
                           accept="image/*">
                    <small class="text-muted">
                        JPG / PNG recommended
                    </small>
                </div>

                <!-- USERNAME -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">
                        Username
                    </label>
                    <input type="text"
                           name="username"
                           value="{{ user.username }}"
                           class="form-control"
                           required>
                </div>

                <!-- EMAIL -->
                <div class="mb-3">
                    <label class="form-label fw-semibold">
                        Email
                    </label>
                    <input type="email"
                           name="email"
                           value="{{ user.email }}"
                           class="form-control"
                           required>
                </div>

                <!-- BUTTONS -->
                <div class="d-flex justify-content-between mt-4">
                    <a href="{% url 'profile' %}"
                       class="btn btn-outline-secondary">
                        Cancel
                    </a>

                    <button type="submit"
                            class="btn btn-success px-4">
                        Save Changes
                    </button>
                </div>

            </form>

        </div>

    </div>
</div>

{% endblock %}
